

### * AWS NETWORK 정리 ###

---
---


## VPC 란?
    - VPC(Virtual Private Cloud)는 논리적으로 분리한 서브 네트워크로 AWS 환경 내의 네트워크 최소 단위
    - 사용자의 AWS 전용 계정 가상 네트워크 , 하나의 리전당 하나의 VPC를 제공받는다.     
    - EC2와 같은 AWS 리소스를 VPC에서 실행할 수 있다.
    - VPC에서 실행된 AWS 리소스는 다른 AWS 리소스 또는 인터넷에 연결될 수 있다.  
    - 서로 다른 VPC 간의 통신은 VPC Peering으로 연결 가능

---

## 서브넷이란 ?
    - 서브넷(Subnet)은 VPC의 분할된 IP 주소 범위이다.
    - VPC **CIDR 블럭을 서브넷으로 지정한다.
    - 지정된 서브넷으로 AWS 리소스를 실행할 수 있다.
    - 각 서브넷은 단일 가용 영역 내에서만 존재해야 하며, 여러 영역으로 확장 가능
    - 별도의 가용영역에서 인스턴스를 시작하므로써, 단일 영역에서 장애가 발생할 경우 어플리케이션을 보호할 수 있다.

---

## CIDR 이란?
    - CIDR(Classless Inter-domain Routing)은 클래스없는 도메인 간 라우팅 기법이다.
    - CIDR를 이용하여 네트워크/호스트 파트를 구분할 수 있다
    - IPv4는 8비트(0~255)가 4번 등장하는 구조 => 그런 IPv4 뒤에 /24 와 같이 /를 이용하여 CIDR을 표현할 수 있다.
    - 또한 네트워크 /24는 앞의 24비트 영역을 같은 네트워크로 포함한다는것을 의미한다.
    - 예를 들어 192.168.1.1/24는 192.168.1 => 네트워크 파트이다.
    따라서 192.168.1.0 ~ 192.168.1.255가 동일한 네트워크 이다.

---

## AWS에서 서브넷마다 예약된 IP
    - subnet의 몇몇 IP는 특정용도를 위해 subnet 생성과 함께 예약된다.

    - 예를 들어 10.0.0.0/24를 생성 시 
    1. 10.0.0.0 => Network Address
    1. 10.0.0.1 => VPC 라우터
    1. 10.0.0.2 => DNS 서버
    1. 10.0.0.3 => 미래의 AWS에서 필요한 경우 사용하기 위해 남겨둠
    1. 10.0.0.255 => Network broadcast 주소

---

## Internet Gateway 란?
    - Internet Gateway 란 VPC와 인터넷을 연결해주는 하나의 관문이다.
    - VPC와 Internet 간의 통신을 가능하게 한다.

--- 

## NAT Gateway 란?
    - NAT Gateway는 프라이빗 서브넷이 인터넷과 통신하기 위한 아웃바운드 인스턴스이다.
    - 프리이빗 네트워크가 외부에서 요청되는 인바운드는 필요없더라도 아웃바운드 트래픽만 허용되어야 하는 경우 사용된다.
    - NAT Gateway 프라이빗 서브넷에서 외부로 요청하는 아웃바운드 트래픽을 받아 Internet Gateway와 연결한다.

---

## Security Group & ACL 
=> 방화벽과 같은 역할 (트래픽에 대한 보안정책 설정)
    
    - 보안그룹
        - 인스턴스를 기준으로 적용
        - 룰에 대한 허용 규칙만 적용
        - 아웃바운드 요청에 대한 응답 자동 허용
    - ACL
        - 서브넷 기준 적용
        - 룰에 대한 허용 및 거부 규칙 적용
        - 아웃바운드 요청에 대한 응답 규칙 적용 필요

--- 

## Region을 선택하는 이유
    - 응답속도보다 비용이 중요하다면 미국 동부 리전이 유리
    => 사용자가 리전과 가까울수록 속도가 빠르다 but 가격은 미국이 더 저렴

--- 

## Availability Zone(가용 영역)이란 ?
    - 하나의 Region 안에는 장애로 격리된 여러개의 데이터 센터가 존재하는데 이를 Availability Zone이라고 한다.
    - Availability Zone 안의 노드끼리는 전용선을 이용해 데이터를 빠르게 전송할 수 있다. 
